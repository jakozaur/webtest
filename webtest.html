<head>
  <title>webtest</title>
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300' rel='stylesheet' type='text/css'>
</head>

<body>
  <h1>Check title of any webpage</h1>

  <div class="container">
    {{> browserView}}
    {{> phantomjsCode}}
  </div>
</body>

<template name="browserView">
  <div id="browser-view">
    <p>The site title is "{{title}}".</p>
    <img src="data:image/png;base64,{{screenshoot}}" />
  </div>
</template>

<template name="phantomjsCode">
  <div id="phantomjs-code">
    <textarea>
      var page = require('webpage').create();

      page.viewportSize = viewportSize;

      page.open("http://google.com", function (status) {
        //Page is loaded!
        console.log("Page Opened!");
        var base64 = page.renderBase64('PNG');
        var title = page.evaluate(function () {
          return document.title;
        });

        var result = {
          'screenshootPngBase64': base64,
          'title': title
        };

        callback(undefined, result);
        //phantom.exit();
      });
    </textarea>
    <button>Run</button>
  </div>
</template>
